
<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Seletor de Cores</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #f9f9f9;
      color: #333;
      text-align: center;
      padding: 20px;
    }
    h2 {
      color: #662b8f;
    }
    #drop-area {
      border: 2px dashed #662b8f;
      border-radius: 10px;
      padding: 20px;
      margin-bottom: 20px;
      background: #fff;
      cursor: pointer;
    }
    canvas {
      border: 1px solid #ccc;
      cursor: crosshair;
      max-width: 100%;
    }
    #color-info {
      margin-top: 15px;
      font-size: 18px;
      color: #662b8f;
    }
  </style>
</head>
<body>
  <h2>Selecionar Cor da Imagem</h2>
  <div id="drop-area">
    <p>Arraste ou cole uma imagem aqui</p>
    <input type="file" id="fileElem" accept="image/*" style="display:none">
    <button onclick="document.getElementById('fileElem').click()">Selecionar Imagem</button>
  </div>
  <canvas id="canvas"></canvas>
  <div id="color-info">Clique na imagem para obter a cor</div>

  <script>
    const dropArea = document.getElementById('drop-area');
    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');
    const info = document.getElementById('color-info');
    const fileElem = document.getElementById('fileElem');

    function handleImage(file) {
      const img = new Image();
      img.onload = () => {
        canvas.width = img.width;
        canvas.height = img.height;
        ctx.drawImage(img, 0, 0);
      };
      img.src = URL.createObjectURL(file);
    }

    fileElem.addEventListener('change', e => {
      if (e.target.files.length > 0) {
        handleImage(e.target.files[0]);
      }
    });

    dropArea.addEventListener('dragover', e => {
      e.preventDefault();
      dropArea.style.background = '#eee';
    });

    dropArea.addEventListener('dragleave', () => {
      dropArea.style.background = '#fff';
    });

    dropArea.addEventListener('drop', e => {
      e.preventDefault();
      dropArea.style.background = '#fff';
      if (e.dataTransfer.files.length > 0) {
        handleImage(e.dataTransfer.files[0]);
      }
    });

    document.addEventListener('paste', e => {
      const items = e.clipboardData.items;
      for (let i = 0; i < items.length; i++) {
        if (items[i].type.indexOf('image') !== -1) {
          const file = items[i].getAsFile();
          handleImage(file);
        }
      }
    });

    canvas.addEventListener('click', e => {
      const x = e.offsetX;
      const y = e.offsetY;
      const [r, g, b] = ctx.getImageData(x, y, 1, 1).data;
      const hex = `#${[r, g, b].map(v => v.toString(16).padStart(2, '0')).join('')}`;
      const hsl = rgbToHsl(r, g, b);
      info.innerHTML = `
        <strong>HEX:</strong> ${hex}<br>
        <strong>RGB:</strong> rgb(${r}, ${g}, ${b})<br>
        <strong>HSL:</strong> hsl(${hsl})
      `;
    });

    function rgbToHsl(r, g, b) {
      r /= 255; g /= 255; b /= 255;
      const max = Math.max(r, g, b), min = Math.min(r, g, b);
      let h, s, l = (max + min) / 2;
      if (max === min) {
        h = s = 0;
      } else {
        const d = max - min;
        s = l > 0.5 ? d / (2 - max - min) : d / (max + min);
        switch (max) {
          case r: h = (g - b) / d + (g < b ? 6 : 0); break;
          case g: h = (b - r) / d + 2; break;
          case b: h = (r - g) / d + 4; break;
        }
        h /= 6;
      }
      return `${Math.round(h * 360)}, ${Math.round(s * 100)}%, ${Math.round(l * 100)}%`;
    }
  </script>
</body>
</html>
